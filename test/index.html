<html>


<script
  src="https://code.jquery.com/jquery-3.1.1.js"
  integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
  crossorigin="anonymous"></script>

<script>

var baseURL = "http://manky.me/";

function serverRequest(requestType, endpoint, myData, callback){
  $.ajax({
      type: requestType,
      dataType: "json",
      contentType: "application/x-www-form-urlencoded",
      url: baseURL + endpoint,
      data: myData,
      xhrFields: { withCredentials: true },
      success: function (response) {
          callback && callback(response);
      },
      error: function (response) {
          callback && callback(response);
      }
  });
}

var serverFunctions = {
  login: function(myEmail, myPassword){
    var myObj = {
      email: myEmail,
      password: myPassword
    };
    serverRequest("POST","login", myObj, function(response){
      console.log(response);
    });
  },

  logout: function(){
    var myObj = {};
    serverRequest("DELETE","logout", myObj, function(response){
      console.log(response);
    });
  },

  showUsers: function(){
    var myObj = {};
    serverRequest("GET","user/list", myObj, function(response){
      console.log(response);
    });
  },

  getUser: function(userID){
    var myObj = {};
    serverRequest("GET","user/"+userID, myObj, function(response){
      console.log(response);
    });
  },

  updateUser: function(userID,myName,myEmail){
    var myObj = {
      name: myName,
      email: myEmail
    };
    serverRequest("PUT","user/"+userID, myObj, function(response){
      console.log(response);
    });
  },

  register: function(myName,myRoll,myEmail,myPassword){
    var myObj = {
      name: myName,
      email: myEmail,
      password: myPassword,
      role: myRoll
    };

    serverRequest("POST","register", myObj, function(response){
      console.log(response);
    });
  },


  addQuestion: function(Qname,Qoptions,Qactive){
    var myObj = {
    	"name": "Question",
    	"options": [
    		{"name":"O1","image":"O1.jpg"},
    		{"name":"O1","image":"O1.jpg"},
    		{"name":"O1","image":"O1.jpg"},
    		{"name":"O1","image":"O1.jpg"}
    	],
    	"active": true
    }

    serverRequest("POST","question", myObj, function(response){
      console.log(response);
    });
  }
}




$(document).ready(function(){

    var myApp = [{name: "Option1", image: "O1.jpg"},{name: "Option1", image: "O1.jpg"},{name: "Option1", image: "O1.jpg"},{name: "Option1", image: "O1.jpg"}];


    serverFunctions.addQuestion("Question 1", myApp,true);

    $(".loginSubmit").click(function(){
        serverFunctions.login($(".login1").val().trim(),$(".login2").val().trim());
    });

    $(".logoutSubmit").click(function(){
        serverFunctions.logout();
    });

    $(".showUsersSubmit").click(function(){
        serverFunctions.showUsers();
    });

    $(".getUserSubmit").click(function(){
        serverFunctions.getUser($(".getUser1").val().trim());
    });

    $(".updateUserSubmit").click(function(){
        serverFunctions.updateUser($(".updateUser1").val().trim(),$(".updateUser2").val().trim(),$(".updateUser3").val().trim());
    });

    $(".registerSubmit").click(function(){
        serverFunctions.register($(".register1").val().trim(),$(".register4").val().trim(),$(".register2").val().trim(),$(".register3").val().trim());
    });

});
</script>

<hr>
LOGIN
<input type="text" class='login1' value='stuthi@casanyla.com' placeholder="email">
<input type="text" class='login2' value='admin' placeholder="pass">
<button class='loginSubmit'>submit</button>


<hr>
LOGOUT
<button class='logoutSubmit'>submit</button>


<hr>
SHOW USERS
<button class='showUsersSubmit'>submit</button>


<hr>
GET USER
<input type="text" class='getUser1' placeholder="id">
<button class='getUserSubmit'>submit</button>

<hr>
UPDATE USER
<input type="text" class='updateUser1' placeholder="id">
<input type="text" class='updateUser2' placeholder="name">
<input type="text" class='updateUser3' placeholder="email">
<button class='updateUserSubmit'>submit</button>

<hr>
REGISTER
<input type="text" class='register1' placeholder="name">
<input type="text" class='register2' placeholder="email">
<input type="text" class='register3' placeholder="password">
<input type="text" class='register4' placeholder="role">
<button class='registerSubmit'>submit</button>

</html>
